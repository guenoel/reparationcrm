import{Q as U,k as c,m as j,l as I,h as L,D as C,f as o,a as f,u as g,w as y,F as x,o as r,Z as H,b as t,i as N,A as Q,H as R,n as i,G as P,E as Y,t as d,g as $,j as F,d as S}from"./app-sx8I9MJF.js";import{_ as q}from"./AuthenticatedLayout-D6jzmdd-.js";import{d as h}from"./index-WYmgruwZ.js";import"./ApplicationLogo-UVF1Jj2f.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},G={class:"devices__list table"},Z={class:"relative"},J={class:"legend--services"},K=["onClick"],O=["onClick"],W={key:0},X={key:1},ee={class:"table--items devices__list__bottom"},te={class:"pagination"},ne=["innerHTML","onClick"],ue={__name:"Index",setup(ae){const M=U();let b=c([]),k=c([]),u=c("");const v=c(!1),l=c([]),_=c(10);j(async()=>{const e=M.props.auth.user;e&&e.role===0&&(v.value=!0),m()}),I(u,()=>{m()});const w=e=>!e.price_paid&&!e.accepted&&!e.done&&e.device.returned?"bg-gray-200":!e.price_paid&&!e.accepted&&!e.done&&!e.device.returned?"bg-orange-300":e.price_paid&&!e.accepted&&!e.done&&!e.device.returned?"bg-orange-500":!e.price_paid&&e.accepted&&!e.done&&!e.device.returned?"bg-blue-300":e.price_paid&&e.accepted&&!e.done&&!e.device.returned?"bg-blue-500":!e.price_paid&&e.accepted&&e.done&&!e.device.returned?"bg-green-300":e.price_paid&&e.accepted&&e.done&&!e.device.returned?"bg-green-700":e.price_paid&&e.accepted&&e.done&&e.device.returned?"bg-gray-500":!e.price_paid&&e.accepted&&e.done&&e.device.returned?"bg-red-500":"",T=L(()=>l.value.length===0?b.value:b.value.filter(e=>l.value.includes(w(e)))),s=e=>{l.value.includes(e)?l.value=l.value.filter(n=>n!==e):l.value.push(e)},m=async()=>{try{const e=await C.get(`/api/services?searchQuery=${u.value}&perPage=${_.value}`);b.value=e.data.services.data,k.value=e.data.services.links}catch(e){console.error("Error fetching services:",e)}},B=e=>{h.Inertia.visit(`/tasks/create?service_id=${e}`)},D=e=>{h.Inertia.visit(`/spares/create?service_id=${e}`)},V=e=>{!e.url||e.active||C.get(e.url).then(n=>{b.value=n.data.services.data,k.value=n.data.services.links})},A=e=>{h.Inertia.visit(`/services/${e}/edit`)},E=e=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&C.delete(`/api/services/${e}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),m()})})};return(e,n)=>(r(),o(x,null,[f(g(H),{title:"Enregistrement prestation"}),f(q,null,{header:y(()=>n[11]||(n[11]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[t("span",null,"Prestations")],-1)])),default:y(()=>[t("div",z,[t("div",G,[n[17]||(n[17]=t("div",{class:"customers__titlebar dflex justify-content-between align-items-center"},[t("div",{class:"customers__titlebar--item"},[t("h1",null,"Prestations")])],-1)),t("div",Z,[N(t("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche prestation...","onUpdate:modelValue":n[0]||(n[0]=a=>R(u)?u.value=a:u=a)},null,512),[[Q,g(u)]])]),n[18]||(n[18]=t("div",{class:"legend--title"},[t("p",null,"Légende et filtre:")],-1)),t("div",J,[t("span",{class:i(["bg-orange-300",{"active-filter":l.value.includes("bg-orange-300")}]),onClick:n[1]||(n[1]=a=>s("bg-orange-300"))}," Non payé, non accepté, non terminé, non rendu ",2),t("span",{class:i(["bg-orange-500",{"active-filter":l.value.includes("bg-orange-500")}]),onClick:n[2]||(n[2]=a=>s("bg-orange-500"))}," Payé, non accepté, non terminé, non rendu ",2),t("span",{class:i(["bg-red-500",{"active-filter":l.value.includes("bg-red-500")}]),onClick:n[3]||(n[3]=a=>s("bg-red-500"))}," Non payé, accepté, terminé, rendu ",2),t("span",{class:i(["bg-blue-300",{"active-filter":l.value.includes("bg-blue-300")}]),onClick:n[4]||(n[4]=a=>s("bg-blue-300"))}," Non Payé, accepté, non terminé, non rendu ",2),t("span",{class:i(["bg-blue-500",{"active-filter":l.value.includes("bg-blue-500")}]),onClick:n[5]||(n[5]=a=>s("bg-blue-500"))}," Payé, accepté, non terminé, non rendu ",2),t("span",{class:i(["bg-gray-200",{"active-filter":l.value.includes("bg-gray-200")}]),onClick:n[6]||(n[6]=a=>s("bg-gray-200"))}," Non payé, non accepté, non terminé, rendu ",2),t("span",{class:i(["bg-green-300",{"active-filter":l.value.includes("bg-green-300")}]),onClick:n[7]||(n[7]=a=>s("bg-green-300"))}," Non payé, accepté, terminé, non rendu ",2),t("span",{class:i(["bg-green-700",{"active-filter":l.value.includes("bg-green-700")}]),onClick:n[8]||(n[8]=a=>s("bg-green-700"))}," Payé, accepté, terminé, non rendu ",2),t("span",{class:i(["bg-gray-500",{"active-filter":l.value.includes("bg-gray-500")}]),onClick:n[9]||(n[9]=a=>s("bg-gray-500"))}," Payé, accepté, terminé, rendu ",2)]),n[19]||(n[19]=t("div",{class:"table--heading mt-2 services__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[t("p",{class:"table--heading--col1"},"Utilisateur"),t("p",{class:"table--heading--col2"},"Marque"),t("p",{class:"table--heading--col3"},"Nom Modèle"),t("p",{class:"table--heading--col4"},"No Modèle"),t("p",{class:"table--heading--col5"},"No Serie"),t("p",{class:"table--heading--col6"},"Description de la prestation"),t("p",{class:"table--heading--col7"},"Prix"),t("p",{class:"table--heading--col8"},"Actions")],-1)),(r(!0),o(x,null,P(T.value,a=>(r(),o("div",{class:i(["table--items services__list__item",w(a)]),key:a.id},[t("p",null,d(a.device.user.name),1),t("p",null,d(a.device.brand),1),t("p",null,d(a.device.model_name),1),t("p",null,d(a.device.model_number),1),t("p",null,d(a.device.serial_number),1),t("p",null,d(a.description),1),t("p",null,d(a.price),1),t("div",null,[t("button",{class:"btn-icon btn-icon-success",onClick:p=>A(a.id)},n[12]||(n[12]=[t("i",{class:"fas fa-pencil-alt"},null,-1)]),8,K),!v.value||!a.price?(r(),o("button",{key:0,class:"btn-icon btn-icon-danger",onClick:p=>E(a.id)},n[13]||(n[13]=[t("i",{class:"far fa-trash-alt"},null,-1)]),8,O)):$("",!0)]),v.value?$("",!0):(r(),o("div",W,[f(g(F),{href:"/tasks/create",class:"btn btn-secondary my-1",onClick:p=>B(a.id)},{default:y(()=>n[14]||(n[14]=[S(" Ajouter une tâche ")])),_:2},1032,["onClick"])])),v.value?$("",!0):(r(),o("div",X,[f(g(F),{href:"/spares/create",class:"btn btn-secondary my-1",onClick:p=>D(a.id)},{default:y(()=>n[15]||(n[15]=[S(" Ajouter une pièce ")])),_:2},1032,["onClick"])]))],2))),128)),t("div",ee,[t("ul",te,[(r(!0),o(x,null,P(g(k),(a,p)=>(r(),o("a",{href:"#",class:i(["btn btn-secondary",{active:a.active,disable:!a.url}]),key:p,innerHTML:a.label,onClick:le=>V(a)},null,10,ne))),128))]),N(t("select",{"onUpdate:modelValue":n[10]||(n[10]=a=>_.value=a),onChange:m,class:"select-pagination"},n[16]||(n[16]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1),t("option",{value:"200"},"200",-1),t("option",{value:"500"},"500",-1),t("option",{value:"1000"},"1000",-1)]),544),[[Y,_.value]])])])])]),_:1})],64))}};export{ue as default};
