import{q as _,v as w,s as k,G as m,i as n,a as v,u as i,w as g,m as B,F as b,o,Z as M,b as e,l as A,g as D,y as F,H as I,J as T,K as h,t as r,n as $,I as E}from"./app-BQP8i3no.js";const V={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},H={class:"devices__list table"},L={class:"customers__titlebar dflex justify-content-between align-items-center"},N={class:"customers__titlebar--item"},S={class:"relative"},Y=["src"],j=["onClick"],q=["onClick"],P={class:"pagination"},Q=["innerHTML","onClick"],J={__name:"Index_mistral",setup(R){let c=_([]),d=_([]),l=_("");w(async()=>{u()}),k(l,()=>{u()});const f=a=>"/upload/"+a,u=async()=>{try{const a=await m.get("/api/devices?&searchQuery="+l.value);c.value=a.data.devices.data,d.value=a.data.devices.links}catch(a){console.error("Error fetching devices:",a)}},x=a=>{!a.url||a.active||m.get(a.url).then(t=>{c.value=t.data.devices.data,d.value=t.data.devices.links})},y=a=>{E.Inertia.visit(`/devices/${a}/edit`)},C=a=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&m.delete(`/api/devices/${a}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),u()})})};return(a,t)=>(o(),n(b,null,[v(i(M),{title:"Enregistrement Appareil"}),v(B,null,{header:g(()=>t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Appareils")],-1)])),default:g(()=>[e("div",V,[e("div",H,[e("div",L,[t[3]||(t[3]=e("div",{class:"customers__titlebar--item"},[e("h1",null,"Appareils")],-1)),e("div",N,[v(i(A),{href:"/devices/create",class:"btn btn-secondary my-1"},{default:g(()=>t[2]||(t[2]=[D(" Ajouter un appareil ")])),_:1})])]),e("div",S,[F(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche d'appareil...","onUpdate:modelValue":t[0]||(t[0]=s=>T(l)?l.value=s:l=s)},null,512),[[I,i(l)]])]),t[6]||(t[6]=e("div",{class:"table--heading mt-2 devices__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[e("p",{class:"table--heading--col1"},"Image"),e("p",{class:"table--heading--col2"},"Client"),e("p",{class:"table--heading--col3"},"Marque"),e("p",{class:"table--heading--col4"},"ModÃ¨le"),e("p",{class:"table--heading--col5"},"Prestation"),e("p",{class:"table--heading--col6"},"actions")],-1)),(o(!0),n(b,null,h(i(c),s=>(o(),n("div",{class:"table--items devices__list__item",key:s.id},[e("img",{src:f(s.image)},null,8,Y),e("p",null,r(s.user_id),1),e("p",null,r(s.brand),1),e("p",null,r(s.model_name),1),e("p",null,r(s.description),1),e("div",null,[e("button",{class:"btn-icon btn-icon-success",onClick:p=>y(s.id)},t[4]||(t[4]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,j),e("button",{class:"btn-icon btn-icon-danger",onClick:p=>C(s.id)},t[5]||(t[5]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,q)])]))),128)),e("div",null,[e("ul",P,[(o(!0),n(b,null,h(i(d),(s,p)=>(o(),n("a",{href:"#",class:$(["btn",{active:s.active,disable:!s.url}]),key:p,innerHTML:s.label,onClick:z=>x(s)},null,10,Q))),128))])])])])]),_:1})],64))}};export{J as default};
