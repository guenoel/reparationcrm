import{Q as E,k as d,m as F,l as M,D as _,f as i,a as C,u as c,w as h,F as x,o,Z as I,b as t,i as k,A as N,H as A,g as w,E as D,G as H,d as a,t as n,n as L}from"./app-BrQThaKp.js";import{_ as Q}from"./AuthenticatedLayout-BzilsnKP.js";import{d as U}from"./index-Br-uvqLY.js";import"./ApplicationLogo-D5-q05GN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const Y={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},R={class:"devices__list table"},j={class:"relative"},z={class:"table--heading mt-2 spares__list__heading",style:{"padding-top":"20px",background:"#FFF"}},G={key:0,class:"table--heading--col8"},Z=["src"],q={key:0},J=["onClick"],K=["onClick"],O={class:"table--items devices__list__bottom"},W={class:"pagination"},X=["innerHTML","onClick"],ie={__name:"Index",setup(ee){const B=E();let m=d([]),v=d([]),r=d("");const b=d(!1),g=d(10);F(async()=>{const l=B.props.auth.user;l&&l.role===0&&(b.value=!0),u()}),M(r,()=>{u()});const P=l=>"/upload/"+l,u=async()=>{try{const l=await _.get(`/api/spares?searchQuery=${r.value}&perPage=${g.value}`);m.value=l.data.spares.data,v.value=l.data.spares.links}catch(l){console.error("Error fetching spares:",l)}},S=l=>{!l.url||l.active||_.get(l.url).then(e=>{m.value=e.data.spares.data,v.value=e.data.spares.links})},$=l=>{U.Inertia.visit(`/spares/${l}/edit`)},T=l=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&_.delete(`/api/spares/${l}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),u()})})};return(l,e)=>(o(),i(x,null,[C(c(I),{title:"Enregistrement pièce"}),C(Q,null,{header:h(()=>e[2]||(e[2]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[t("span",null,"Pièces")],-1)])),default:h(()=>[t("div",Y,[t("div",R,[e[19]||(e[19]=t("div",{class:"customers__titlebar dflex justify-content-between align-items-center"},[t("div",{class:"customers__titlebar--item"},[t("h1",null,"Pièces")])],-1)),t("div",j,[k(t("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche pièce...","onUpdate:modelValue":e[0]||(e[0]=s=>A(r)?r.value=s:r=s)},null,512),[[N,c(r)]])]),t("div",z,[e[3]||(e[3]=t("p",{class:"table--heading--col1"},"Image",-1)),e[4]||(e[4]=t("p",{class:"table--heading--col2"},"Prestation",-1)),e[5]||(e[5]=t("p",{class:"table--heading--col3"},"Type de pièce",-1)),e[6]||(e[6]=t("p",{class:"table--heading--col4"},"Description",-1)),e[7]||(e[7]=t("p",{class:"table--heading--col5"},"Date de commande",-1)),e[8]||(e[8]=t("p",{class:"table--heading--col6"},"Date de reception",-1)),e[9]||(e[9]=t("p",{class:"table--heading--col7"},"Date de retour",-1)),b.value?w("",!0):(o(),i("p",G,"Actions"))]),(o(!0),i(x,null,D(c(m),s=>{var p,f,y;return o(),i("div",{class:"table--items spares__list__item",key:s.id},[t("img",{src:P(s.image)},null,8,Z),t("p",null,[a(n(s.service.device.user.name)+" -> "+n(s.service.device.brand)+" "+n(s.service.device.model_name),1),e[10]||(e[10]=t("br",null,null,-1)),a("-> "+n(s.service.description),1)]),t("p",null,[a(n((p=s.spare_type)==null?void 0:p.dealer),1),e[11]||(e[11]=t("br",null,null,-1)),a(n((f=s.spare_type)==null?void 0:f.type),1),e[12]||(e[12]=t("br",null,null,-1)),a(n((y=s.spare_type)==null?void 0:y.brand),1)]),t("p",null,n(s.description),1),t("p",null,[a(n(s.formatted_purchase_date),1),e[13]||(e[13]=t("br",null,null,-1)),a(" "+n(s.formatted_purchase_time),1)]),t("p",null,[a(n(s.formatted_reception_date),1),e[14]||(e[14]=t("br",null,null,-1)),a(" "+n(s.formatted_reception_time),1)]),t("p",null,[a(n(s.formatted_return_date),1),e[15]||(e[15]=t("br",null,null,-1)),a(" "+n(s.formatted_return_time),1)]),b.value?w("",!0):(o(),i("div",q,[t("button",{class:"btn-icon btn-icon-success",onClick:V=>$(s.id)},e[16]||(e[16]=[t("i",{class:"fas fa-pencil-alt"},null,-1)]),8,J),t("button",{class:"btn-icon btn-icon-danger",onClick:V=>T(s.id)},e[17]||(e[17]=[t("i",{class:"far fa-trash-alt"},null,-1)]),8,K)]))])}),128)),t("div",O,[t("ul",W,[(o(!0),i(x,null,D(c(v),(s,p)=>(o(),i("a",{href:"#",class:L(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:p,innerHTML:s.label,onClick:f=>S(s)},null,10,X))),128))]),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>g.value=s),onChange:u,class:"select-pagination"},e[18]||(e[18]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1),t("option",{value:"200"},"200",-1),t("option",{value:"500"},"500",-1),t("option",{value:"1000"},"1000",-1)]),544),[[H,g.value]])])])])]),_:1})],64))}};export{ie as default};
