import{Q as F,k as d,m as V,l as E,D as f,f as n,a as h,u as c,w as x,F as _,o as i,Z as M,b as e,i as y,A as P,H as I,g as C,E as k,G as N,d as r,t as a,n as S}from"./app-DYnQmmMk.js";import{_ as A}from"./AuthenticatedLayout-D4G2mKWv.js";import{d as H}from"./index-DDRJxBaz.js";import"./ApplicationLogo-BLwltB0H.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Q={class:"devices__list table"},U={class:"relative"},Y={class:"table--heading mt-2 tasks__list__heading",style:{"padding-top":"20px",background:"#FFF"}},R={key:0,class:"table--heading--col7"},j=["src"],z={key:0},G=["onClick"],Z=["onClick"],q={class:"table--items devices__list__bottom"},J={class:"pagination"},K=["innerHTML","onClick"],ae={__name:"Index",setup(O){const w=F();let p=d([]),m=d([]),o=d("");const v=d(!1),g=d(10);V(async()=>{const l=w.props.auth.user;l&&l.role===0&&(v.value=!0),u()}),E(o,()=>{u()});const T=l=>"/upload/"+l,u=async()=>{try{const l=await f.get(`/api/tasks?searchQuery=${o.value}&perPage=${g.value}`);p.value=l.data.tasks.data,m.value=l.data.tasks.links}catch(l){console.error("Error fetching tasks:",l)}},B=l=>{!l.url||l.active||f.get(l.url).then(t=>{p.value=t.data.tasks.data,m.value=t.data.tasks.links})},$=l=>{H.Inertia.visit(`/tasks/${l}/edit`)},D=l=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&f.delete(`/api/tasks/${l}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),u()})})};return(l,t)=>(i(),n(_,null,[h(c(M),{title:"Enregistrement tâche"}),h(A,null,{header:x(()=>t[2]||(t[2]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Tâches")],-1)])),default:x(()=>[e("div",L,[e("div",Q,[t[15]||(t[15]=e("div",{class:"customers__titlebar dflex justify-content-between align-items-center"},[e("div",{class:"customers__titlebar--item"},[e("h1",null,"Tâches")])],-1)),e("div",U,[y(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche tâche...","onUpdate:modelValue":t[0]||(t[0]=s=>I(o)?o.value=s:o=s)},null,512),[[P,c(o)]])]),e("div",Y,[t[3]||(t[3]=e("p",{class:"table--heading--col1"},"Image",-1)),t[4]||(t[4]=e("p",{class:"table--heading--col2"},"Prestation",-1)),t[5]||(t[5]=e("p",{class:"table--heading--col3"},"Technicien",-1)),t[6]||(t[6]=e("p",{class:"table--heading--col4"},"Début",-1)),t[7]||(t[7]=e("p",{class:"table--heading--col5"},"Fin",-1)),t[8]||(t[8]=e("p",{class:"table--heading--col6"},"Description",-1)),v.value?C("",!0):(i(),n("p",R,"Actions"))]),(i(!0),n(_,null,k(c(p),s=>(i(),n("div",{class:"table--items tasks__list__item",key:s.id},[e("img",{src:T(s.image)},null,8,j),e("p",null,[r(a(s.service.device.user.name)+" -> "+a(s.service.device.brand)+" "+a(s.service.device.model_name),1),t[9]||(t[9]=e("br",null,null,-1)),r("-> "+a(s.service.description),1)]),e("p",null,a(s.user.name),1),e("p",null,[r(a(s.formatted_start_date),1),t[10]||(t[10]=e("br",null,null,-1)),r(" "+a(s.formatted_start_time),1)]),e("p",null,[r(a(s.formatted_end_date),1),t[11]||(t[11]=e("br",null,null,-1)),r(" "+a(s.formatted_end_time),1)]),e("p",null,a(s.description),1),v.value?C("",!0):(i(),n("div",z,[e("button",{class:"btn-icon btn-icon-success",onClick:b=>$(s.id)},t[12]||(t[12]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,G),e("button",{class:"btn-icon btn-icon-danger",onClick:b=>D(s.id)},t[13]||(t[13]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,Z)]))]))),128)),e("div",q,[e("ul",J,[(i(!0),n(_,null,k(c(m),(s,b)=>(i(),n("a",{href:"#",class:S(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:b,innerHTML:s.label,onClick:W=>B(s)},null,10,K))),128))]),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>g.value=s),onChange:u,class:"select-pagination"},t[14]||(t[14]=[e("option",{value:"5"},"5",-1),e("option",{value:"10"},"10",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1),e("option",{value:"200"},"200",-1),e("option",{value:"500"},"500",-1),e("option",{value:"1000"},"1000",-1)]),544),[[N,g.value]])])])])]),_:1})],64))}};export{ae as default};
