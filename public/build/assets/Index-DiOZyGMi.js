import{k as f,m as C,l as D,D as _,f as r,a as g,u as c,w as v,F as h,o as d,Z as F,b as e,j as B,d as l,i as L,A as S,H as $,G as x,t as n,n as A}from"./app-yM3657U3.js";import{_ as E}from"./AuthenticatedLayout-B6egPl2z.js";import{d as I}from"./index-kRsavbv0.js";import"./ApplicationLogo-C_PVY0Zz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},R={class:"devices__list table"},V={class:"customers__titlebar dflex justify-content-between align-items-center"},j={class:"customers__titlebar--item"},H={class:"relative"},N=["src"],Y=["onClick"],P=["onClick"],Q={class:"table--items devices__list__bottom"},z={class:"pagination"},G=["innerHTML","onClick"],X={__name:"Index",setup(U){let m=f([]),p=f([]),i=f("");C(async()=>{b()}),D(i,()=>{b()});const y=a=>"/upload/"+a,b=async()=>{try{const a=await _.get("/api/tasks?&searchQuery="+i.value);m.value=a.data.tasks.data,p.value=a.data.tasks.links}catch(a){console.error("Error fetching tasks:",a)}},k=a=>{!a.url||a.active||_.get(a.url).then(t=>{m.value=t.data.tasks.data,p.value=t.data.tasks.links})},T=a=>{I.Inertia.visit(`/tasks/${a}/edit`)},w=a=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&_.delete(`/api/tasks/${a}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),b()})})},u=a=>{if(!a||a===0)return"";const t=new Date(a),s=t.toLocaleDateString("fr-FR"),o=t.toLocaleTimeString("fr-FR");return{date:s,time:o}};return(a,t)=>(d(),r(h,null,[g(c(F),{title:"Enregistrement tâche"}),g(E,null,{header:v(()=>t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Tâches")],-1)])),default:v(()=>[e("div",M,[e("div",R,[e("div",V,[t[3]||(t[3]=e("div",{class:"customers__titlebar--item"},[e("h1",null,"Tâches")],-1)),e("div",j,[g(c(B),{href:"/tasks/create",class:"btn btn-secondary my-1"},{default:v(()=>t[2]||(t[2]=[l(" Ajouter une tâche ")])),_:1})])]),e("div",H,[L(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche tâche...","onUpdate:modelValue":t[0]||(t[0]=s=>$(i)?i.value=s:i=s)},null,512),[[S,c(i)]])]),t[9]||(t[9]=e("div",{class:"table--heading mt-2 tasks__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[e("p",{class:"table--heading--col1"},"Image"),e("p",{class:"table--heading--col2"},"Prestation"),e("p",{class:"table--heading--col3"},"Technicien"),e("p",{class:"table--heading--col4"},"Début"),e("p",{class:"table--heading--col5"},"Fin"),e("p",{class:"table--heading--col6"},"Description"),e("p",{class:"table--heading--col7"},"Actions")],-1)),(d(!0),r(h,null,x(c(m),s=>(d(),r("div",{class:"table--items tasks__list__item",key:s.id},[e("img",{src:y(s.image)},null,8,N),e("p",null,[l(n(s.service.device.user.name)+" -> "+n(s.service.device.brand)+" "+n(s.service.device.model_name),1),t[4]||(t[4]=e("br",null,null,-1)),l("-> "+n(s.service.description),1)]),e("p",null,n(s.user.name),1),e("p",null,[l(n(u(s.start).date),1),t[5]||(t[5]=e("br",null,null,-1)),l(" "+n(u(s.start).time),1)]),e("p",null,[l(n(u(s.end).date),1),t[6]||(t[6]=e("br",null,null,-1)),l(" "+n(u(s.end).time),1)]),e("p",null,n(s.description),1),e("div",null,[e("button",{class:"btn-icon btn-icon-success",onClick:o=>T(s.id)},t[7]||(t[7]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Y),e("button",{class:"btn-icon btn-icon-danger",onClick:o=>w(s.id)},t[8]||(t[8]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,P)])]))),128)),e("div",Q,[e("ul",z,[(d(!0),r(h,null,x(c(p),(s,o)=>(d(),r("a",{href:"#",class:A(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:o,innerHTML:s.label,onClick:Z=>k(s)},null,10,G))),128))])])])])]),_:1})],64))}};export{X as default};
