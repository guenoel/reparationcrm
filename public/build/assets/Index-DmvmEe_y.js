import{Q as P,k as c,m as $,l as V,D as _,f as o,a as y,u as m,w as C,F as x,o as i,Z as E,b as t,i as k,A as L,H as M,g as h,G as w,E as I,d as a,t as n,n as N}from"./app-CPGboCPt.js";import{_ as R}from"./AuthenticatedLayout-f5D1ikic.js";import{d as A}from"./index-tZtMVd24.js";import"./ApplicationLogo-8LmpvpSF.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Q={class:"devices__list table"},U={class:"relative"},Y={class:"table--heading mt-2 spares__list__heading",style:{"padding-top":"20px",background:"#FFF"}},j={key:0,class:"table--heading--col8"},z=["src"],G={key:0},Z=["onClick"],q=["onClick"],J={class:"table--items devices__list__bottom"},K={class:"pagination"},O=["innerHTML","onClick"],ae={__name:"Index",setup(W){const D=P();let v=c([]),g=c([]),r=c("");const b=c(!1),f=c(10);$(async()=>{const l=D.props.auth.user;l&&l.role===0&&(b.value=!0),p()}),V(r,()=>{p()});const S=l=>"/upload/"+l,p=async()=>{try{const l=await _.get(`/api/spares?searchQuery=${r.value}&perPage=${f.value}`);v.value=l.data.spares.data,g.value=l.data.spares.links}catch(l){console.error("Error fetching spares:",l)}},T=l=>{!l.url||l.active||_.get(l.url).then(e=>{v.value=e.data.spares.data,g.value=e.data.spares.links})},B=l=>{A.Inertia.visit(`/spares/${l}/edit`)},F=l=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&_.delete(`/api/spares/${l}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),p()})})},d=l=>{if(!l||l===0)return"";const e=new Date(l),s=e.toLocaleDateString("fr-FR"),u=e.toLocaleTimeString("fr-FR");return{date:s,time:u}};return(l,e)=>(i(),o(x,null,[y(m(E),{title:"Enregistrement pièce"}),y(R,null,{header:C(()=>e[2]||(e[2]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[t("span",null,"Pièces")],-1)])),default:C(()=>[t("div",H,[t("div",Q,[e[19]||(e[19]=t("div",{class:"customers__titlebar dflex justify-content-between align-items-center"},[t("div",{class:"customers__titlebar--item"},[t("h1",null,"Pièces")])],-1)),t("div",U,[k(t("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche pièce...","onUpdate:modelValue":e[0]||(e[0]=s=>M(r)?r.value=s:r=s)},null,512),[[L,m(r)]])]),t("div",Y,[e[3]||(e[3]=t("p",{class:"table--heading--col1"},"Image",-1)),e[4]||(e[4]=t("p",{class:"table--heading--col2"},"Prestation",-1)),e[5]||(e[5]=t("p",{class:"table--heading--col3"},"Type de pièce",-1)),e[6]||(e[6]=t("p",{class:"table--heading--col4"},"Description",-1)),e[7]||(e[7]=t("p",{class:"table--heading--col5"},"Date de commande",-1)),e[8]||(e[8]=t("p",{class:"table--heading--col6"},"Date de reception",-1)),e[9]||(e[9]=t("p",{class:"table--heading--col7"},"Date de retour",-1)),b.value?h("",!0):(i(),o("p",j,"Actions"))]),(i(!0),o(x,null,w(m(v),s=>(i(),o("div",{class:"table--items spares__list__item",key:s.id},[t("img",{src:S(s.image)},null,8,z),t("p",null,[a(n(s.service.device.user.name)+" -> "+n(s.service.device.brand)+" "+n(s.service.device.model_name),1),e[10]||(e[10]=t("br",null,null,-1)),a("-> "+n(s.service.description),1)]),t("p",null,[a(n(s.spare_type.dealer),1),e[11]||(e[11]=t("br",null,null,-1)),a(n(s.spare_type.type),1),e[12]||(e[12]=t("br",null,null,-1)),a(n(s.spare_type.brand),1)]),t("p",null,n(s.description),1),t("p",null,[a(n(d(s.purchase_date).date),1),e[13]||(e[13]=t("br",null,null,-1)),a(" "+n(d(s.purchase_date).time),1)]),t("p",null,[a(n(d(s.reception_date).date),1),e[14]||(e[14]=t("br",null,null,-1)),a(" "+n(d(s.reception_date).time),1)]),t("p",null,[a(n(d(s.return_date).date),1),e[15]||(e[15]=t("br",null,null,-1)),a(" "+n(d(s.return_date).time),1)]),b.value?h("",!0):(i(),o("div",G,[t("button",{class:"btn-icon btn-icon-success",onClick:u=>B(s.id)},e[16]||(e[16]=[t("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Z),t("button",{class:"btn-icon btn-icon-danger",onClick:u=>F(s.id)},e[17]||(e[17]=[t("i",{class:"far fa-trash-alt"},null,-1)]),8,q)]))]))),128)),t("div",J,[t("ul",K,[(i(!0),o(x,null,w(m(g),(s,u)=>(i(),o("a",{href:"#",class:N(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:u,innerHTML:s.label,onClick:X=>T(s)},null,10,O))),128))]),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),onChange:p,class:"select-pagination"},e[18]||(e[18]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1),t("option",{value:"200"},"200",-1),t("option",{value:"500"},"500",-1),t("option",{value:"1000"},"1000",-1)]),544),[[I,f.value]])])])])]),_:1})],64))}};export{ae as default};
