import{q as g,E as N,Q as S,v as j,G as f,i as l,a as y,u as d,w as x,m as C,F as E,o,Z as F,b as s,y as r,H as m,t as u,j as _,I as k,S as w}from"./app-BQP8i3no.js";const B={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},$={key:0},q={key:1},R={class:"devices__create"},W={class:"devices__create__cardWrapper mt-2"},h={class:"devices__create__main"},G={class:"devices__create__main--addInfo card py-2 px-2 bg-white"},H={key:0,style:{color:"red"}},L={key:1,style:{color:"red"}},O={key:2,style:{color:"red"}},Q={key:3,style:{color:"red"}},T={class:"devices__create__main--media--images mt-2"},Z={class:"devices__create__main--media--images--list list-unstyled"},z={class:"devices__create__main--media--images--item"},J={class:"devices__create__main--media--images--item--imgWrapper"},K=["src"],P={class:"devices__create__main--media--images--item"},X={class:"devices__create__main--media--images--item--form"},ie={__name:"Form_mistral",setup(Y){const p=g(),i=N({user_id:"",brand:"",model_name:"",model_number:"",serial_number:"",imei:"",description:"",image:""}),v=S(),b=g(!1);let n=g([]);j(()=>{v.props.route&&v.props.route.name==="device.edit"&&(b.value=!0,p.value=v.props.route.params.id,V())});const V=async()=>{try{let a=await f.get(`/api/devices/${p.value}/edit`);i.user_id=a.data.device.user_id,i.brand=a.data.device.brand,i.model_name=a.data.device.model_name,i.model_number=a.data.device.model_number,i.serial_number=a.data.device.serial_number,i.imei=a.data.device.imei,i.description=a.data.device.description,i.image=a.data.device.image}catch(a){console.error("Error fetching device data:",a)}},U=()=>{let a="/upload/no-image.jpg";return i.image&&(i.image.indexOf("base64")!=-1?a=i.image:a="/upload/"+i.image),a},D=a=>{const e=a.target;let t=e.files?e.files[0]:null;if(t){const c=new FileReader;c.onloadend=ee=>{c.result&&(i.image=c.result)},c.readAsDataURL(t)}},I=(a,e)=>{b.value?M():A()},A=(a,e)=>{f.post("/api/devices",i).then(t=>{k.Inertia.visit("/devices/index/"),w.fire({icon:"success",title:"Appareil bien ajouté"})}).catch(t=>{t.response&&t.response.status===422?n.value=t.response.data.errors:console.error("Error creating device:",t)})},M=(a,e)=>{f.put(`/api/devices/${p.value}`,i).then(t=>{k.Inertia.visit("/devices/index/"),w.fire({icon:"success",title:"Appareil bien modifié"})}).catch(t=>{t.response.status===422&&(n.value=t.response.data.errors)})};return(a,e)=>(o(),l(E,null,[y(d(F),{title:"Enregistrement Appareil"}),y(C,null,{header:x(()=>[s("h2",B,[b.value?(o(),l("span",$,"Modification d'un appareil")):(o(),l("span",q,"Nouvel Appareil"))])]),default:x(()=>[s("div",R,[e[16]||(e[16]=s("div",{class:"devices__create__titlebar dflex justify-content-between align-items-center"},[s("div",{class:"devices__create__titlebar--item"},[s("button",{class:"btn btn-secondary ml-1"},"Save")])],-1)),s("div",W,[s("div",h,[s("div",G,[e[8]||(e[8]=s("p",{class:"mb-1"},"Utilisateur",-1)),r(s("input",{type:"text",class:"input",id:"user_id",name:"user_id","onUpdate:modelValue":e[0]||(e[0]=t=>i.user_id=t)},null,512),[[m,i.user_id]]),d(n).user_id?(o(),l("small",H,u(d(n).user_id),1)):_("",!0),e[9]||(e[9]=s("p",{class:"mb-1"},"Marque",-1)),r(s("input",{type:"text",class:"input",id:"brand",name:"brand","onUpdate:modelValue":e[1]||(e[1]=t=>i.brand=t)},null,512),[[m,i.brand]]),d(n).brand?(o(),l("small",L,u(d(n).brand),1)):_("",!0),e[10]||(e[10]=s("p",{class:"mb-1"},"Modèle",-1)),r(s("input",{type:"text",class:"input",id:"model_name",name:"model_name","onUpdate:modelValue":e[2]||(e[2]=t=>i.model_name=t)},null,512),[[m,i.model_name]]),d(n).model_name?(o(),l("small",O,u(d(n).model_name),1)):_("",!0),e[11]||(e[11]=s("p",{class:"mb-1"},"No de modèle",-1)),r(s("input",{type:"text",class:"input",id:"model_number",name:"model_number","onUpdate:modelValue":e[3]||(e[3]=t=>i.model_number=t)},null,512),[[m,i.model_number]]),e[12]||(e[12]=s("p",{class:"mb-1"},"No de série",-1)),r(s("input",{type:"text",class:"input",id:"serial_number",name:"serial_number","onUpdate:modelValue":e[4]||(e[4]=t=>i.serial_number=t)},null,512),[[m,i.serial_number]]),e[13]||(e[13]=s("p",{class:"mb-1"},"imei",-1)),r(s("input",{type:"text",class:"input",id:"imei",name:"imei","onUpdate:modelValue":e[5]||(e[5]=t=>i.imei=t)},null,512),[[m,i.imei]]),e[14]||(e[14]=s("p",{class:"my-1"},"Description (optional)",-1)),r(s("textarea",{cols:"10",rows:"5",class:"textarea",id:"description",name:"description","onUpdate:modelValue":e[6]||(e[6]=t=>i.description=t)},null,512),[[m,i.description]]),d(n).description?(o(),l("small",Q,u(d(n).description),1)):_("",!0),s("div",T,[s("ul",Z,[s("li",z,[s("div",J,[s("img",{src:U(),class:"devices__create__main--media--images--item--img",alt:""},null,8,K)])]),s("li",P,[s("form",X,[e[7]||(e[7]=s("label",{class:"devices__create__main--media--images--item--form--label",for:"myfile"},"Add Image",-1)),s("input",{class:"devices__create__main--media--images--item--form--input",type:"file",id:"myfile",onChange:D},null,32)])])])])])])]),s("div",{class:"dflex justify-content-between align-items-center my-3"},[e[15]||(e[15]=s("p",null,null,-1)),s("button",{class:"btn btn-secondary",onClick:I},"Save")])])]),_:1})],64))}};export{ie as default};
