import{Q as M,k as g,m as D,l as S,D as f,f as s,a as c,u as l,w as u,F as y,o as i,Z as j,b as t,j as h,d as v,i as V,A as E,H as I,G as C,n as w,t as r,g as x}from"./app-yM3657U3.js";import{_ as L}from"./AuthenticatedLayout-B6egPl2z.js";import{d as k}from"./index-kRsavbv0.js";import"./ApplicationLogo-C_PVY0Zz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},H={class:"devices__list table"},Q={class:"customers__titlebar dflex justify-content-between align-items-center"},R={class:"customers__titlebar--item"},Y={class:"relative"},q=["onClick"],z=["onClick"],G={key:0},Z={key:1},J={class:"table--items devices__list__bottom"},K={class:"pagination"},O=["innerHTML","onClick"],ie={__name:"Index",setup(W){const N=M();let b=g([]),m=g([]),o=g("");const p=g(!1);D(async()=>{const e=N.props.auth.user;e&&e.role===0&&(p.value=!0),_()}),S(o,()=>{_()});const P=e=>!e.price_paid&&!e.accepted&&e.device.returned?"bg-gray-200":!e.price_paid&&!e.accepted&&!e.done?"bg-orange-300":e.price_paid&&!e.accepted&&!e.done?"bg-orange-500":!e.price_paid&&e.accepted&&!e.done?"bg-beige-300":!e.price_paid&&e.accepted&&e.done&&!e.device.returned?"bg-beige-500":e.price_paid&&e.accepted&&!e.done&&!e.device.returned?"bg-green-300":e.price_paid&&e.accepted&&e.done&&!e.device.returned?"bg-green-700":e.price_paid&&e.accepted&&e.done&&e.device.returned?"bg-gray-500":!e.price_paid&&e.accepted&&e.done&&e.device.returned?"bg-red-500":"",_=async()=>{try{const e=await f.get("/api/services?&searchQuery="+o.value);b.value=e.data.services.data,m.value=e.data.services.links}catch(e){console.error("Error fetching services:",e)}},$=e=>{k.Inertia.visit(`/tasks/create?service_id=${e}`)},T=e=>{k.Inertia.visit(`/spares/create?service_id=${e}`)},A=e=>{!e.url||e.active||f.get(e.url).then(n=>{b.value=n.data.services.data,m.value=n.data.services.links})},B=e=>{k.Inertia.visit(`/services/${e}/edit`)},F=e=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{n.isConfirmed&&f.delete(`/api/services/${e}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),_()})})};return(e,n)=>(i(),s(y,null,[c(l(j),{title:"Enregistrement prestation"}),c(L,null,{header:u(()=>n[1]||(n[1]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[t("span",null,"Prestations")],-1)])),default:u(()=>[t("div",U,[t("div",H,[t("div",Q,[n[3]||(n[3]=t("div",{class:"customers__titlebar--item"},[t("h1",null,"Prestations")],-1)),t("div",R,[c(l(h),{href:"/services/create",class:"btn btn-secondary my-1"},{default:u(()=>n[2]||(n[2]=[v(" Ajouter une prestation ")])),_:1})])]),t("div",Y,[V(t("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche prestation...","onUpdate:modelValue":n[0]||(n[0]=a=>I(o)?o.value=a:o=a)},null,512),[[E,l(o)]])]),n[8]||(n[8]=t("div",{class:"legend--title"},[t("p",null,"Légende:")],-1)),n[9]||(n[9]=t("div",{class:"legend--services"},[t("span",{class:"bg-orange-300"},"Non payé, non accepté, non terminé, non rendu"),t("span",{class:"bg-orange-500"},"Payé, non accepté, non terminé, non rendu"),t("span",{class:"bg-gray-200"},"Non payé, non accepté, non terminé, rendu"),t("span",{class:"bg-beige-300"},"Non Payé, accepté, non terminé, non rendu"),t("span",{class:"bg-beige-500"},"Non payé, accepté, terminé, non rendu"),t("span",{class:"bg-gray-500"},"Payé, accepté, terminé, rendu"),t("span",{class:"bg-green-300"},"Payé, accepté, non terminé, non rendu"),t("span",{class:"bg-green-700"},"Payé, accepté, terminé, non rendu"),t("span",{class:"bg-red-500"},"Non payé, accepté, terminé, rendu")],-1)),n[10]||(n[10]=t("div",{class:"table--heading mt-2 services__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[t("p",{class:"table--heading--col1"},"Utilisateur"),t("p",{class:"table--heading--col2"},"Appareil"),t("p",{class:"table--heading--col3"},"Marque"),t("p",{class:"table--heading--col4"},"Nom Modèle"),t("p",{class:"table--heading--col5"},"No Modèle"),t("p",{class:"table--heading--col6"},"Description de la prestation"),t("p",{class:"table--heading--col7"},"Prix"),t("p",{class:"table--heading--col8"},"Actions")],-1)),(i(!0),s(y,null,C(l(b),a=>(i(),s("div",{class:w(["table--items services__list__item",P(a)]),key:a.id},[t("p",null,r(a.device.user.name),1),t("p",null,r(a.device_id),1),t("p",null,r(a.device.brand),1),t("p",null,r(a.device.model_name),1),t("p",null,r(a.device.model_number),1),t("p",null,r(a.description),1),t("p",null,r(a.price),1),t("div",null,[t("button",{class:"btn-icon btn-icon-success",onClick:d=>B(a.id)},n[4]||(n[4]=[t("i",{class:"fas fa-pencil-alt"},null,-1)]),8,q),!p.value||!a.price?(i(),s("button",{key:0,class:"btn-icon btn-icon-danger",onClick:d=>F(a.id)},n[5]||(n[5]=[t("i",{class:"far fa-trash-alt"},null,-1)]),8,z)):x("",!0)]),p.value?x("",!0):(i(),s("div",G,[c(l(h),{href:"/tasks/create",class:"btn btn-secondary my-1",onClick:d=>$(a.id)},{default:u(()=>n[6]||(n[6]=[v(" Ajouter une tâche ")])),_:2},1032,["onClick"])])),p.value?x("",!0):(i(),s("div",Z,[c(l(h),{href:"/spares/create",class:"btn btn-secondary my-1",onClick:d=>T(a.id)},{default:u(()=>n[7]||(n[7]=[v(" Ajouter une pièce ")])),_:2},1032,["onClick"])]))],2))),128)),t("div",J,[t("ul",K,[(i(!0),s(y,null,C(l(m),(a,d)=>(i(),s("a",{href:"#",class:w(["btn btn-secondary",{active:a.active,disable:!a.url}]),key:d,innerHTML:a.label,onClick:X=>A(a)},null,10,O))),128))])])])])]),_:1})],64))}};export{ie as default};
