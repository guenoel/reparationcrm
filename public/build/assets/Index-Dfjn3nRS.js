import{k as r,m as T,l as I,h as j,D as h,f as i,a as g,u,w as m,F as y,o,Z as L,b as e,j as k,d as w,i as $,A as N,H as P,n as b,E as A,G as U,t as c,g as H}from"./app-BrQThaKp.js";import{_ as R}from"./AuthenticatedLayout-BzilsnKP.js";import{d as B}from"./index-Br-uvqLY.js";import"./ApplicationLogo-D5-q05GN.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const z={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Q={class:"devices__list table"},q={class:"customers__titlebar dflex justify-content-between align-items-center"},G={class:"customers__titlebar--item"},Z={class:"relative"},J={class:"legend--devices"},K=["src"],O=["onClick"],W=["onClick"],X={class:"table--items devices__list__bottom"},Y={class:"pagination"},ee=["innerHTML","onClick"],re={__name:"Index",setup(te){let d=r([]),f=r([]),n=r("");const a=r([]),_=r(10);T(async()=>{p()}),I(n,()=>{p()});const x=l=>l.services.some(s=>s.returned===0)?"bg-green-300":"bg-gray-200",D=j(()=>a.value.length===0?d.value:d.value.filter(l=>a.value.includes(x(l)))),C=l=>{a.value.includes(l)?a.value=a.value.filter(t=>t!==l):a.value.push(l)},F=l=>"/upload/"+l,p=async()=>{try{const l=await h.get(`/api/devices?searchQuery=${n.value}&perPage=${_.value}`);d.value=l.data.devices.data||[],f.value=l.data.devices.links||[]}catch(l){console.error("Error fetching devices:",l)}},S=l=>{B.Inertia.visit(`/services/create?device_id=${l}`)},M=l=>{!l.url||l.active||h.get(l.url).then(t=>{d.value=t.data.devices.data,f.value=t.data.devices.links})},V=l=>{B.Inertia.visit(`/devices/${l}/edit`)},E=l=>{Swal.fire({title:"Etes vous sur ?",text:"Vous ne pourrez pas annuler cette action !",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"oui, supprimer!"}).then(t=>{t.isConfirmed&&h.delete(`/api/devices/${l}`).then(()=>{Swal.fire({title:"Supprimé!",text:"Appareil supprimé avec succès.",icon:"success",timer:2e3,showConfirmButton:!1}),p()})})};return(l,t)=>(o(),i(y,null,[g(u(L),{title:"Enregistrement Appareil"}),g(R,null,{header:m(()=>t[4]||(t[4]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Appareils")],-1)])),default:m(()=>[e("div",z,[e("div",Q,[e("div",q,[t[6]||(t[6]=e("div",{class:"customers__titlebar--item"},[e("h1",null,"Appareils")],-1)),e("div",G,[g(u(k),{href:"/devices/create",class:"btn btn-secondary my-1"},{default:m(()=>t[5]||(t[5]=[w(" Ajouter un appareil ")])),_:1})])]),e("div",Z,[$(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche d'appareil...","onUpdate:modelValue":t[0]||(t[0]=s=>P(n)?n.value=s:n=s)},null,512),[[N,u(n)]])]),t[11]||(t[11]=e("div",{class:"legend--title"},[e("p",null,"Légende:")],-1)),e("div",J,[e("span",{class:b(["bg-gray-200",{"active-filter":a.value.includes("bg-gray-200")}]),onClick:t[1]||(t[1]=s=>C("bg-gray-200"))},"Appareil rendu",2),e("span",{class:b(["bg-green-300",{"active-filter":a.value.includes("bg-green-300")}]),onClick:t[2]||(t[2]=s=>C("bg-green-300"))},"Appareil non rendu",2)]),t[12]||(t[12]=e("div",{class:"table--heading mt-2 devices__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[e("p",{class:"table--heading--col1"},"Image"),e("p",{class:"table--heading--col2"},"Client"),e("p",{class:"table--heading--col3"},"Marque"),e("p",{class:"table--heading--col4"},"Modèle"),e("p",{class:"table--heading--col5"},"Couleur"),e("p",{class:"table--heading--col6"},"Description de l'appareil"),e("p",{class:"table--heading--col7"},"actions")],-1)),(o(!0),i(y,null,A(D.value,s=>(o(),i("div",{class:b(["table--items devices__list__item",x(s)]),key:s.id},[e("img",{src:F(s.image)},null,8,K),e("p",null,c(s.user.name),1),e("p",null,c(s.brand),1),e("p",null,c(s.model_name),1),e("p",null,c(s.color),1),e("p",null,c(s.description),1),e("div",null,[e("button",{class:"btn-icon btn-icon-success",onClick:v=>V(s.id)},t[7]||(t[7]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,O),s.has_service?H("",!0):(o(),i("button",{key:0,class:"btn-icon btn-icon-danger",onClick:v=>E(s.id)},t[8]||(t[8]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,W))]),e("div",null,[g(u(k),{href:"/services/create",class:"btn btn-secondary my-1",onClick:v=>S(s.id)},{default:m(()=>t[9]||(t[9]=[w(" Ajouter une prestation ")])),_:2},1032,["onClick"])])],2))),128)),e("div",X,[e("ul",Y,[(o(!0),i(y,null,A(u(f),(s,v)=>(o(),i("a",{href:"#",class:b(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:v,innerHTML:s.label,onClick:se=>M(s)},null,10,ee))),128))]),$(e("select",{"onUpdate:modelValue":t[3]||(t[3]=s=>_.value=s),onChange:p,class:"select-pagination"},t[10]||(t[10]=[e("option",{value:"5"},"5",-1),e("option",{value:"10"},"10",-1),e("option",{value:"50"},"50",-1),e("option",{value:"100"},"100",-1),e("option",{value:"200"},"200",-1),e("option",{value:"500"},"500",-1),e("option",{value:"1000"},"1000",-1)]),544),[[U,_.value]])])])])]),_:1})],64))}};export{re as default};
