import{k as g,C as M,Q as N,m as S,D as f,f as l,a as y,u as d,w as x,F,o,Z as j,b as i,i as r,A as m,t as _,g as p,S as k}from"./app-Bwbwcj0n.js";import{_ as E}from"./AuthenticatedLayout-CRaEOa06.js";import{d as w}from"./index-C0sw1FsZ.js";import"./ApplicationLogo-DfDQ9F8b.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const B={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},$={key:0},h={key:1},R={class:"devices__create"},W={class:"devices__create__cardWrapper mt-2"},q={class:"devices__create__main"},L={class:"devices__create__main--addInfo card py-2 px-2 bg-white"},O={key:0,style:{color:"red"}},Q={key:1,style:{color:"red"}},T={key:2,style:{color:"red"}},Z={key:3,style:{color:"red"}},z={class:"devices__create__main--media--images mt-2"},G={class:"devices__create__main--media--images--list list-unstyled"},H={class:"devices__create__main--media--images--item"},J={class:"devices__create__main--media--images--item--imgWrapper"},K=["src"],P={class:"devices__create__main--media--images--item"},X={class:"devices__create__main--media--images--item--form"},de={__name:"Form",setup(Y){const v=g(),t=M({user_id:"",brand:"",model_name:"",model_number:"",serial_number:"",imei:"",description:"",image:""}),c=N(),b=g(!1);let n=g([]);S(()=>{c.props.route&&c.props.route.name==="device.edit"&&(b.value=!0,v.value=c.props.route.params.id,V()),console.log(c.props.route)});const V=async()=>{try{let a=await f.get(`/api/devices/${v.value}/edit`).then(e=>{t.user_id=e.data.device.user_id,t.brand=e.data.device.brand,t.model_name=e.data.device.model_name,t.model_number=e.data.device.model_number,t.serial_number=e.data.device.serial_number,t.imei=e.data.device.imei,t.description=e.data.device.description,t.image=e.data.device.image})}catch(a){console.error("Error fetching device data:",a)}},U=()=>{let a="/upload/no-image.jpg";return t.image&&(t.image.indexOf("base64")!=-1?a=t.image:a="/upload/"+t.image),a},D=a=>{const e=a.target;let s=e.files?e.files[0]:null;if(s){const u=new FileReader;u.onloadend=ee=>{u.result&&(t.image=u.result)},u.readAsDataURL(s)}},A=(a,e)=>{b.value?I():C()},C=(a,e)=>{f.post("/api/devices",t).then(s=>{w.Inertia.visit("/devices/index/"),k.fire({icon:"success",title:"Appareil bien ajouté"})}).catch(s=>{s.response&&s.response.status===422?n.value=s.response.data.errors:console.error("Error creating device:",s)})},I=(a,e)=>{f.put(`/api/devices/${v.value}`,t).then(s=>{w.Inertia.visit("/devices/index/"),k.fire({icon:"success",title:"Appareil bien modifié"})}).catch(s=>{s.response.status===422&&(n.value=s.response.data.errors)})};return(a,e)=>(o(),l(F,null,[y(d(j),{title:"Enregistrement Appareil"}),y(E,null,{header:x(()=>[i("h2",B,[b.value?(o(),l("span",$,"Modification d'un appareil")):(o(),l("span",h,"Nouvel Appareil"))])]),default:x(()=>[i("div",R,[e[16]||(e[16]=i("div",{class:"devices__create__titlebar dflex justify-content-between align-items-center"},[i("div",{class:"devices__create__titlebar--item"},[i("button",{class:"btn btn-secondary ml-1"},"Save")])],-1)),i("div",W,[i("div",q,[i("div",L,[e[8]||(e[8]=i("p",{class:"mb-1"},"Utilisateur",-1)),r(i("input",{type:"text",class:"input",id:"user_id",name:"user_id","onUpdate:modelValue":e[0]||(e[0]=s=>t.user_id=s)},null,512),[[m,t.user_id]]),d(n).user_id?(o(),l("small",O,_(d(n).user_id),1)):p("",!0),e[9]||(e[9]=i("p",{class:"mb-1"},"Marque",-1)),r(i("input",{type:"text",class:"input",id:"brand",name:"brand","onUpdate:modelValue":e[1]||(e[1]=s=>t.brand=s)},null,512),[[m,t.brand]]),d(n).brand?(o(),l("small",Q,_(d(n).brand),1)):p("",!0),e[10]||(e[10]=i("p",{class:"mb-1"},"Modèle",-1)),r(i("input",{type:"text",class:"input",id:"model_name",name:"model_name","onUpdate:modelValue":e[2]||(e[2]=s=>t.model_name=s)},null,512),[[m,t.model_name]]),d(n).model_name?(o(),l("small",T,_(d(n).model_name),1)):p("",!0),e[11]||(e[11]=i("p",{class:"mb-1"},"No de modèle",-1)),r(i("input",{type:"text",class:"input",id:"model_number",name:"model_number","onUpdate:modelValue":e[3]||(e[3]=s=>t.model_number=s)},null,512),[[m,t.model_number]]),e[12]||(e[12]=i("p",{class:"mb-1"},"No de série",-1)),r(i("input",{type:"text",class:"input",id:"serial_number",name:"serial_number","onUpdate:modelValue":e[4]||(e[4]=s=>t.serial_number=s)},null,512),[[m,t.serial_number]]),e[13]||(e[13]=i("p",{class:"mb-1"},"imei",-1)),r(i("input",{type:"text",class:"input",id:"imei",name:"imei","onUpdate:modelValue":e[5]||(e[5]=s=>t.imei=s)},null,512),[[m,t.imei]]),e[14]||(e[14]=i("p",{class:"my-1"},"Description (optional)",-1)),r(i("textarea",{cols:"10",rows:"5",class:"textarea",id:"description",name:"description","onUpdate:modelValue":e[6]||(e[6]=s=>t.description=s)},null,512),[[m,t.description]]),d(n).description?(o(),l("small",Z,_(d(n).description),1)):p("",!0),i("div",z,[i("ul",G,[i("li",H,[i("div",J,[i("img",{src:U(),class:"devices__create__main--media--images--item--img",alt:""},null,8,K)])]),i("li",P,[i("form",X,[e[7]||(e[7]=i("label",{class:"devices__create__main--media--images--item--form--label",for:"myfile"},"Add Image",-1)),i("input",{class:"devices__create__main--media--images--item--form--input",type:"file",id:"myfile",onChange:D},null,32)])])])])])])]),i("div",{class:"dflex justify-content-between align-items-center my-3"},[e[15]||(e[15]=i("p",null,null,-1)),i("button",{class:"btn btn-secondary",onClick:A},"Save")])])]),_:1})],64))}};export{de as default};
