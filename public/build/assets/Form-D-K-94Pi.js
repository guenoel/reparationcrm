import{k as _,C as M,Q as C,m as I,D as l,f as o,a as g,u as c,w as x,F as b,o as n,Z as N,b as t,i as m,E as j,G as B,t as p,g as f,A as h,S as k}from"./app-gyy7AzGw.js";import{_ as F}from"./AuthenticatedLayout-ejZzCHZw.js";import{d as w}from"./index-BTWyWh5k.js";import"./ApplicationLogo--aYsc0Kz.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},U={key:0},$={key:1},G={class:"services__create"},L={class:"services__create__cardWrapper mt-2"},P={class:"services__create__main"},Q={class:"services__create__main--addInfo card py-2 px-2 bg-white"},W=["value"],Z={key:0,style:{color:"red"}},q={key:1,style:{color:"red"}},z={key:2,style:{color:"red"}},Y={__name:"Form",setup(H){const v=_(),r=M({device_id:"",Description:"",price:""}),d=C(),u=_(!1);let a=_([]);I(()=>{d.props.route&&d.props.route.name==="services.edit"?(u.value=!0,v.value=d.props.route.params.id,E()):S()});const S=async()=>{try{let i=await l.get("/api/services/create");d.props.devices=i.data.devices}catch(i){console.error("Error fetching devices:",i)}},E=async()=>{try{let i=await l.get(`/api/services/${v.value}/edit`);i.data.service&&(r.device_id=i.data.service.device_id,r.description=i.data.service.description,r.price=i.data.service.price),i.data.devices&&(d.props.devices=i.data.devices)}catch(i){console.error("Error fetching service data:",i)}},D=(i,e)=>{u.value?A():V()},V=(i,e)=>{l.post("/api/services",r).then(s=>{k.fire({icon:"success",title:"Appareil ajouté"}),setTimeout(()=>{w.Inertia.visit("/services/index/")},2e3)}).catch(s=>{s.response&&s.response.status===422?a.value=s.response.data.errors:console.error("Error creating service:",s)})},A=(i,e)=>{l.put(`/api/services/${v.value}`,r).then(s=>{k.fire({icon:"success",title:"Appareil modifié"}),setTimeout(()=>{w.Inertia.visit("/services/index/")},2e3)}).catch(s=>{s.response.status===422?a.value=s.response.data.errors:console.error("Error creating service:",s)})};return(i,e)=>(n(),o(b,null,[g(c(N),{title:"Enregistrement Appareil"}),g(F,null,{header:x(()=>[t("h2",T,[u.value?(n(),o("span",U,"Modification d'une prestation")):(n(),o("span",$,"Nouvelle prestation"))])]),default:x(()=>[t("div",G,[e[7]||(e[7]=t("div",{class:"services__create__titlebar dflex justify-content-between align-items-center"},[t("div",{class:"services__create__titlebar--item"},[t("button",{class:"btn btn-secondary ml-1"},"Save")])],-1)),t("div",L,[t("div",P,[t("div",Q,[e[3]||(e[3]=t("p",{class:"mb-1"},"Appareil",-1)),m(t("select",{"onUpdate:modelValue":e[0]||(e[0]=s=>r.device_id=s),class:"input",id:"device_id",name:"device_id"},[(n(!0),o(b,null,B(c(d).props.devices,(s,y)=>(n(),o("option",{key:y,value:y},p(s),9,W))),128))],512),[[j,r.device_id]]),c(a).device_id?(n(),o("small",Z,p(c(a).device_id),1)):f("",!0),e[4]||(e[4]=t("p",{class:"my-1"},"Description",-1)),m(t("textarea",{cols:"10",rows:"5",class:"textarea",id:"description",name:"description","onUpdate:modelValue":e[1]||(e[1]=s=>r.description=s)},null,512),[[h,r.description]]),c(a).description?(n(),o("small",q,p(c(a).description),1)):f("",!0),e[5]||(e[5]=t("p",{class:"mb-1"},"Prix",-1)),m(t("input",{type:"text",class:"input",id:"price",name:"price","onUpdate:modelValue":e[2]||(e[2]=s=>r.price=s)},null,512),[[h,r.price]]),c(a).price?(n(),o("small",z,p(c(a).price),1)):f("",!0)])])]),t("div",{class:"dflex justify-content-between align-items-center my-3"},[e[6]||(e[6]=t("p",null,null,-1)),t("button",{class:"btn btn-secondary",onClick:D},"Save")])])]),_:1})],64))}};export{Y as default};
