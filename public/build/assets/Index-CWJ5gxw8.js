import{Q as S,k as u,m as V,l as E,D as h,f as a,a as x,u as m,w as y,F as _,o,Z as L,b as t,i as k,A as M,H as P,g as C,G as T,E as I,d as r,t as n,n as N}from"./app-48GMqJ0X.js";import{_ as R}from"./AuthenticatedLayout-C3C7JhOe.js";import{d as A}from"./index-D9AAl59p.js";import"./ApplicationLogo-BkXIqR07.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},Q={class:"devices__list table"},U={class:"relative"},Y={class:"table--heading mt-2 tasks__list__heading",style:{"padding-top":"20px",background:"#FFF"}},j={key:0,class:"table--heading--col7"},z=["src"],G={key:0},Z=["onClick"],q=["onClick"],J={class:"table--items devices__list__bottom"},K={class:"pagination"},O=["innerHTML","onClick"],ae={__name:"Index",setup(W){const w=S();let v=u([]),g=u([]),i=u("");const b=u(!1),f=u(10);V(async()=>{const l=w.props.auth.user;l&&l.role===0&&(b.value=!0),c()}),E(i,()=>{c()});const D=l=>"/upload/"+l,c=async()=>{try{const l=await h.get(`/api/tasks?searchQuery=${i.value}&perPage=${f.value}`);v.value=l.data.tasks.data,g.value=l.data.tasks.links}catch(l){console.error("Error fetching tasks:",l)}},F=l=>{!l.url||l.active||h.get(l.url).then(e=>{v.value=e.data.tasks.data,g.value=e.data.tasks.links})},B=l=>{A.Inertia.visit(`/tasks/${l}/edit`)},$=l=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&h.delete(`/api/tasks/${l}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),c()})})},p=l=>{if(!l||l===0)return"";const e=new Date(l),s=e.toLocaleDateString("fr-FR"),d=e.toLocaleTimeString("fr-FR");return{date:s,time:d}};return(l,e)=>(o(),a(_,null,[x(m(L),{title:"Enregistrement tâche"}),x(R,null,{header:y(()=>e[2]||(e[2]=[t("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[t("span",null,"Tâches")],-1)])),default:y(()=>[t("div",H,[t("div",Q,[e[15]||(e[15]=t("div",{class:"customers__titlebar dflex justify-content-between align-items-center"},[t("div",{class:"customers__titlebar--item"},[t("h1",null,"Tâches")])],-1)),t("div",U,[k(t("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche tâche...","onUpdate:modelValue":e[0]||(e[0]=s=>P(i)?i.value=s:i=s)},null,512),[[M,m(i)]])]),t("div",Y,[e[3]||(e[3]=t("p",{class:"table--heading--col1"},"Image",-1)),e[4]||(e[4]=t("p",{class:"table--heading--col2"},"Prestation",-1)),e[5]||(e[5]=t("p",{class:"table--heading--col3"},"Technicien",-1)),e[6]||(e[6]=t("p",{class:"table--heading--col4"},"Début",-1)),e[7]||(e[7]=t("p",{class:"table--heading--col5"},"Fin",-1)),e[8]||(e[8]=t("p",{class:"table--heading--col6"},"Description",-1)),b.value?C("",!0):(o(),a("p",j,"Actions"))]),(o(!0),a(_,null,T(m(v),s=>(o(),a("div",{class:"table--items tasks__list__item",key:s.id},[t("img",{src:D(s.image)},null,8,z),t("p",null,[r(n(s.service.device.user.name)+" -> "+n(s.service.device.brand)+" "+n(s.service.device.model_name),1),e[9]||(e[9]=t("br",null,null,-1)),r("-> "+n(s.service.description),1)]),t("p",null,n(s.user.name),1),t("p",null,[r(n(p(s.start).date),1),e[10]||(e[10]=t("br",null,null,-1)),r(" "+n(p(s.start).time),1)]),t("p",null,[r(n(p(s.end).date),1),e[11]||(e[11]=t("br",null,null,-1)),r(" "+n(p(s.end).time),1)]),t("p",null,n(s.description),1),b.value?C("",!0):(o(),a("div",G,[t("button",{class:"btn-icon btn-icon-success",onClick:d=>B(s.id)},e[12]||(e[12]=[t("i",{class:"fas fa-pencil-alt"},null,-1)]),8,Z),t("button",{class:"btn-icon btn-icon-danger",onClick:d=>$(s.id)},e[13]||(e[13]=[t("i",{class:"far fa-trash-alt"},null,-1)]),8,q)]))]))),128)),t("div",J,[t("ul",K,[(o(!0),a(_,null,T(m(g),(s,d)=>(o(),a("a",{href:"#",class:N(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:d,innerHTML:s.label,onClick:X=>F(s)},null,10,O))),128))]),k(t("select",{"onUpdate:modelValue":e[1]||(e[1]=s=>f.value=s),onChange:c,class:"select-pagination"},e[14]||(e[14]=[t("option",{value:"5"},"5",-1),t("option",{value:"10"},"10",-1),t("option",{value:"50"},"50",-1),t("option",{value:"100"},"100",-1),t("option",{value:"200"},"200",-1),t("option",{value:"500"},"500",-1),t("option",{value:"1000"},"1000",-1)]),544),[[I,f.value]])])])])]),_:1})],64))}};export{ae as default};
