import{k as _,m as k,l as D,D as b,f as r,a as v,u as o,w as g,F as f,o as d,Z as B,b as e,j as S,d as i,i as T,A as F,H as $,G as h,t as l,n as E}from"./app-BvaMqHqO.js";import{_ as I}from"./AuthenticatedLayout-BKyfTRh5.js";import{d as M}from"./index-CrQM_QGU.js";import"./ApplicationLogo-5XEmEwmf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const P={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},V={class:"devices__list table"},j={class:"customers__titlebar dflex justify-content-between align-items-center"},A={class:"customers__titlebar--item"},H={class:"relative"},L=["src"],N=["onClick"],Y=["onClick"],Q={class:"table--items devices__list__bottom"},R={class:"pagination"},z=["innerHTML","onClick"],W={__name:"Index",setup(G){let c=_([]),u=_([]),n=_("");k(async()=>{p()}),D(n,()=>{p()});const x=a=>"/upload/"+a,p=async()=>{try{const a=await b.get("/api/spares?&searchQuery="+n.value);c.value=a.data.spares.data,u.value=a.data.spares.links}catch(a){console.error("Error fetching spares:",a)}},y=a=>{!a.url||a.active||b.get(a.url).then(t=>{c.value=t.data.spares.data,u.value=t.data.spares.links})},w=a=>{M.Inertia.visit(`/spares/${a}/edit`)},C=a=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&b.delete(`/api/spares/${a}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),p()})})};return(a,t)=>(d(),r(f,null,[v(o(B),{title:"Enregistrement pièce"}),v(I,null,{header:g(()=>t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Pièces")],-1)])),default:g(()=>[e("div",P,[e("div",V,[e("div",j,[t[3]||(t[3]=e("div",{class:"customers__titlebar--item"},[e("h1",null,"Pièces")],-1)),e("div",A,[v(o(S),{href:"/spares/create",class:"btn btn-secondary my-1"},{default:g(()=>t[2]||(t[2]=[i(" Ajouter une pièce ")])),_:1})])]),e("div",H,[T(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche pièce...","onUpdate:modelValue":t[0]||(t[0]=s=>$(n)?n.value=s:n=s)},null,512),[[F,o(n)]])]),t[9]||(t[9]=e("div",{class:"table--heading mt-2 spares__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[e("p",{class:"table--heading--col1"},"Image"),e("p",{class:"table--heading--col2"},"Prestation"),e("p",{class:"table--heading--col3"},"Type de pièce"),e("p",{class:"table--heading--col4"},"Description"),e("p",{class:"table--heading--col5"},"Date de commande"),e("p",{class:"table--heading--col6"},"Date de reception"),e("p",{class:"table--heading--col7"},"Date de retour")],-1)),(d(!0),r(f,null,h(o(c),s=>(d(),r("div",{class:"table--items spares__list__item",key:s.id},[e("img",{src:x(s.image)},null,8,L),e("p",null,[i(l(s.service.device.user.name)+" -> "+l(s.service.device.brand)+" "+l(s.service.device.model_name),1),t[4]||(t[4]=e("br",null,null,-1)),i("-> "+l(s.service.description),1)]),e("p",null,[i(l(s.spare_type.dealer),1),t[5]||(t[5]=e("br",null,null,-1)),i(l(s.spare_type.type),1),t[6]||(t[6]=e("br",null,null,-1)),i(l(s.spare_type.brand),1)]),e("p",null,l(s.description),1),e("p",null,l(s.purchase_date),1),e("p",null,l(s.reception_date),1),e("p",null,l(s.return_date),1),e("div",null,[e("button",{class:"btn-icon btn-icon-success",onClick:m=>w(s.id)},t[7]||(t[7]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,N),e("button",{class:"btn-icon btn-icon-danger",onClick:m=>C(s.id)},t[8]||(t[8]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,Y)])]))),128)),e("div",Q,[e("ul",R,[(d(!0),r(f,null,h(o(u),(s,m)=>(d(),r("a",{href:"#",class:E(["btn btn-secondary",{active:s.active,disable:!s.url}]),key:m,innerHTML:s.label,onClick:U=>y(s)},null,10,z))),128))])])])])]),_:1})],64))}};export{W as default};
