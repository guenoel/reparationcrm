import{k as g,m as F,l as M,D as b,f as n,a as d,u as i,w as c,F as _,o as r,Z as T,b as e,j as f,d as h,i as I,A as V,H as j,G as x,n as y,t as u,g as E}from"./app-CwCXP5kg.js";import{_ as L}from"./AuthenticatedLayout-CmOhoxlP.js";import{d as C}from"./index-Dwx7afOm.js";import"./ApplicationLogo-DC9Ptwe5.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const N={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},S={class:"devices__list table"},H={class:"customers__titlebar dflex justify-content-between align-items-center"},R={class:"customers__titlebar--item"},Y={class:"relative"},Q=["src"],q=["onClick"],z=["onClick"],G={class:"table--items devices__list__bottom"},P={class:"pagination"},U=["innerHTML","onClick"],te={__name:"Index",setup(Z){let p=g([]),m=g([]),l=g("");F(async()=>{v()}),M(l,()=>{v()});const k=s=>s.returned?"":"bg-green-300",w=s=>"/upload/"+s,v=async()=>{try{const s=await b.get("/api/devices?&searchQuery="+l.value);p.value=s.data.devices.data,m.value=s.data.devices.links}catch(s){console.error("Error fetching devices:",s)}},A=s=>{C.Inertia.visit(`/services/create?device_id=${s}`)},D=s=>{!s.url||s.active||b.get(s.url).then(t=>{p.value=t.data.devices.data,m.value=t.data.devices.links})},B=s=>{C.Inertia.visit(`/devices/${s}/edit`)},$=s=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&b.delete(`/api/devices/${s}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),v()})})};return(s,t)=>(r(),n(_,null,[d(i(T),{title:"Enregistrement Appareil"}),d(L,null,{header:c(()=>t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Appareils")],-1)])),default:c(()=>[e("div",N,[e("div",S,[e("div",H,[t[3]||(t[3]=e("div",{class:"customers__titlebar--item"},[e("h1",null,"Appareils")],-1)),e("div",R,[d(i(f),{href:"/devices/create",class:"btn btn-secondary my-1"},{default:c(()=>t[2]||(t[2]=[h(" Ajouter un appareil ")])),_:1})])]),e("div",Y,[I(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche d'appareil...","onUpdate:modelValue":t[0]||(t[0]=a=>j(l)?l.value=a:l=a)},null,512),[[V,i(l)]])]),t[7]||(t[7]=e("div",{class:"legend--title"},[e("p",null,"Légende:")],-1)),t[8]||(t[8]=e("div",{class:"legend--devices"},[e("span",{class:"bg-gray-200"},"Appareil rendu"),e("span",{class:"bg-green-300"},"Appareil non rendu")],-1)),t[9]||(t[9]=e("div",{class:"table--heading mt-2 devices__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[e("p",{class:"table--heading--col1"},"Image"),e("p",{class:"table--heading--col2"},"Client"),e("p",{class:"table--heading--col3"},"Marque"),e("p",{class:"table--heading--col4"},"Modèle"),e("p",{class:"table--heading--col5"},"Description de l'appareil"),e("p",{class:"table--heading--col6"},"actions")],-1)),(r(!0),n(_,null,x(i(p),a=>(r(),n("div",{class:y(["table--items devices__list__item",k(a)]),key:a.id},[e("img",{src:w(a.image)},null,8,Q),e("p",null,u(a.user.name),1),e("p",null,u(a.brand),1),e("p",null,u(a.model_name),1),e("p",null,u(a.description),1),e("div",null,[e("button",{class:"btn-icon btn-icon-success",onClick:o=>B(a.id)},t[4]||(t[4]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,q),a.has_service?E("",!0):(r(),n("button",{key:0,class:"btn-icon btn-icon-danger",onClick:o=>$(a.id)},t[5]||(t[5]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,z))]),e("div",null,[d(i(f),{href:"/services/create",class:"btn btn-secondary my-1",onClick:o=>A(a.id)},{default:c(()=>t[6]||(t[6]=[h(" Ajouter une prestation ")])),_:2},1032,["onClick"])])],2))),128)),e("div",G,[e("ul",P,[(r(!0),n(_,null,x(i(m),(a,o)=>(r(),n("a",{href:"#",class:y(["btn btn-secondary",{active:a.active,disable:!a.url}]),key:o,innerHTML:a.label,onClick:J=>D(a)},null,10,U))),128))])])])])]),_:1})],64))}};export{te as default};
