import{Q as M,k as p,m as D,l as N,D as h,f as i,a as d,u as l,w as u,F as f,o as n,Z as S,b as e,j as g,d as x,i as j,A as V,H as E,G as k,t as o,g as C,n as I}from"./app-BvaMqHqO.js";import{_ as P}from"./AuthenticatedLayout-BKyfTRh5.js";import{d as y}from"./index-CrQM_QGU.js";import"./ApplicationLogo-5XEmEwmf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const U={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},H={class:"devices__list table"},L={class:"customers__titlebar dflex justify-content-between align-items-center"},Q={class:"customers__titlebar--item"},Y={class:"relative"},R=["onClick"],q=["onClick"],z={key:0},G={key:1},Z={class:"table--items devices__list__bottom"},J={class:"pagination"},K=["innerHTML","onClick"],ie={__name:"Index",setup(O){const w=M();let m=p([]),v=p([]),r=p("");const _=p(!1);D(async()=>{const s=w.props.auth.user;s&&s.role===0&&(_.value=!0),b()}),N(r,()=>{b()});const b=async()=>{try{const s=await h.get("/api/services?&searchQuery="+r.value);m.value=s.data.services.data,v.value=s.data.services.links}catch(s){console.error("Error fetching services:",s)}},$=s=>{y.Inertia.visit(`/tasks/create?service_id=${s}`)},T=s=>{y.Inertia.visit(`/spares/create?service_id=${s}`)},A=s=>{!s.url||s.active||h.get(s.url).then(t=>{m.value=t.data.services.data,v.value=t.data.services.links})},B=s=>{y.Inertia.visit(`/services/${s}/edit`)},F=s=>{Swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{t.isConfirmed&&h.delete(`/api/services/${s}`).then(()=>{Swal.fire({title:"Deleted!",text:"Your file has been deleted.",icon:"success"}),b()})})};return(s,t)=>(n(),i(f,null,[d(l(S),{title:"Enregistrement prestation"}),d(P,null,{header:u(()=>t[1]||(t[1]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800 dark:text-gray-200"},[e("span",null,"Prestations")],-1)])),default:u(()=>[e("div",U,[e("div",H,[e("div",L,[t[3]||(t[3]=e("div",{class:"customers__titlebar--item"},[e("h1",null,"Prestations")],-1)),e("div",Q,[d(l(g),{href:"/services/create",class:"btn btn-secondary my-1"},{default:u(()=>t[2]||(t[2]=[x(" Ajouter une prestation ")])),_:1})])]),e("div",Y,[j(e("input",{class:"search-input",type:"text",name:"search",placeholder:"Recherche prestation...","onUpdate:modelValue":t[0]||(t[0]=a=>E(r)?r.value=a:r=a)},null,512),[[V,l(r)]])]),t[8]||(t[8]=e("div",{class:"table--heading mt-2 services__list__heading",style:{"padding-top":"20px",background:"#FFF"}},[e("p",{class:"table--heading--col1"},"Utilisateur"),e("p",{class:"table--heading--col2"},"Appareil"),e("p",{class:"table--heading--col3"},"Marque"),e("p",{class:"table--heading--col4"},"Nom Modèle"),e("p",{class:"table--heading--col5"},"No Modèle"),e("p",{class:"table--heading--col6"},"Description de la prestation"),e("p",{class:"table--heading--col7"},"Prix"),e("p",{class:"table--heading--col8"},"Actions")],-1)),(n(!0),i(f,null,k(l(m),a=>(n(),i("div",{class:"table--items services__list__item",key:a.id},[e("p",null,o(a.device.user.name),1),e("p",null,o(a.device_id),1),e("p",null,o(a.device.brand),1),e("p",null,o(a.device.model_name),1),e("p",null,o(a.device.model_number),1),e("p",null,o(a.description),1),e("p",null,o(a.price),1),e("div",null,[e("button",{class:"btn-icon btn-icon-success",onClick:c=>B(a.id)},t[4]||(t[4]=[e("i",{class:"fas fa-pencil-alt"},null,-1)]),8,R),e("button",{class:"btn-icon btn-icon-danger",onClick:c=>F(a.id)},t[5]||(t[5]=[e("i",{class:"far fa-trash-alt"},null,-1)]),8,q)]),_.value?C("",!0):(n(),i("div",z,[d(l(g),{href:"/tasks/create",class:"btn btn-secondary my-1",onClick:c=>$(a.id)},{default:u(()=>t[6]||(t[6]=[x(" Ajouter une tâche ")])),_:2},1032,["onClick"])])),_.value?C("",!0):(n(),i("div",G,[d(l(g),{href:"/spares/create",class:"btn btn-secondary my-1",onClick:c=>T(a.id)},{default:u(()=>t[7]||(t[7]=[x(" Ajouter une pièce ")])),_:2},1032,["onClick"])]))]))),128)),e("div",Z,[e("ul",J,[(n(!0),i(f,null,k(l(v),(a,c)=>(n(),i("a",{href:"#",class:I(["btn btn-secondary",{active:a.active,disable:!a.url}]),key:c,innerHTML:a.label,onClick:W=>A(a)},null,10,K))),128))])])])])]),_:1})],64))}};export{ie as default};
